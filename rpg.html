
<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Задачник JavaScript от Трепачёва Дмитрия</title>
	<meta charset="utf-8">
	<style>
		.container{
			width: 992px;
			margin: 0 auto;
		}
		.box-top{
			display: -webkit-flex;
			display: -ms-flex;
			display: flex;
			justify-content: space-between;
		}
		.box-top_item{
			border:1px solid black;
			padding: 10px;
			width: 160px;
		}
		.enemy{
			margin: 100px auto;
			padding: 10px;
			width: 160px;
			text-align: center;
			border:1px solid black;
		}
	</style>
</head>
<body>
	<div class="container">

		<div class="box-top">
			<div class="box-top_item master">
				<p>Мастер меча</p>
				<p>Время до следующей тренировки: <span id="time_to_train">10</span></p>
				<p>Можно тренироваться</p>
				<button id="btn_master" type="submit">Тренироваться</button>
			</div>
			<div class="box-top_item hero">
				<p>Персонаж:</p>
				<p>Сила: <span id="hero_power">1</span></p>
				<p>Предметы:</p>
				<p id="item">Пусто</p>
			</div>
			<div class="box-top_item forge">
				<p>Кузница - выберите что ковать</p>
				<label for="sword_forge">
					<input id="sword_forge" type="radio"> Меч
				</label><br><br>
				<button id="btn_forge">Выковать</button>
			</div>
		</div>

		<div class="enemy">
			<p>Противник</p>
			<button id="btn_enemy">Сражаться в дуэли</button>
		</div>

	</div>

	<script>

		//Функция тренировки =================================
		var TimeToTrain = document.getElementById('time_to_train');
		//Запускает таймер
		function goTimer(){
			window.timerId = window.setInterval(timer, 500);
			// BtnMaster.disabled = true;
		}
		//Останавливает таймер
		function stop(){
			window.clearInterval(window.timerId);
			TimeToTrain.innerHTML = "Можно тренить";
		}
		function timer(){
			var number = parseInt(TimeToTrain.innerHTML)-1;
			TimeToTrain.innerHTML = number;

			if(number == 0) {
				// number--;
				stop();
				// var timetStop = document.getElementById('stop');
				// timetStop.innerHTML = 'Обратный отсчет завершен.';
			}
		}

		var HeroPowerAbility = 1;
		var BtnMaster = document.getElementById('btn_master');
		var HeroPower = document.getElementById('hero_power');
		BtnMaster.addEventListener('click', training);

		function training() {
			goTimer();
			if (HeroPowerAbility < 3 ){
				HeroPowerAbility++;
				HeroPower.innerHTML = HeroPowerAbility;
				alert('Ваша сила увеличиалсь на 1')
			}
			else if (HeroPowerAbility == 3){
				this.removeEventListener('click', training);
				alert("На сегодня тренировка закончена")
			}
		}
		// ==========================================================

		//Функция кузницы ======================================
		var SwordForge = document.getElementById('sword_forge');
		var BtnForge = document.getElementById('btn_forge');
		var HeroItem = document.getElementById('item');
		BtnForge.addEventListener('click', forge);

		function forge() {
			if (SwordForge.checked) {
				alert("Поздравляю! Теперь у вас есть меч");
				this.removeEventListener('click', forge);
				HeroItem.innerHTML = 'Меч';
			}
			else{
				alert('Выберите предмет для ковки!');
			}
		}
		//=======================================================

		//Функция дуэли ======================================
		var BtnEnemy = document.getElementById('btn_enemy');
		BtnEnemy.addEventListener('click', fight);

		function fight() {
			if(HeroPowerAbility < 3 || HeroItem.innerHTML != 'Меч'){
				alert('Вы проиграли дуэль!')
			}
			else{
				alert('Поздравляю! Вы победили в дуэли! Игра окончена')
			}
		}



		//=======================================================




	</script>
</body>
</html>
